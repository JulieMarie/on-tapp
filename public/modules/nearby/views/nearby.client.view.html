<section data-ng-controller="NearbyController">
  <div class="container">
    <ui-gmap-google-map center="map.center" zoom="map.zoom" draggable="true" options="options" bounds="map.bounds">
      <ui-gmap-marker coords="marker.coords" options="marker.options" idkey="marker.id" click="'onClick'">
      <ui-gmap-markers models="allMarkers" coords="'self'" options="'options'" icon="'icon'" click="'onClick'">
        <ui-gmap-windows show="show">
          <div ng-non-bindable>{{title}}</div>
        </ui-gmap-windows>
      </ui-gmap-markers>

      <!-- marker to show user cuurent coordinate -->
      <ui-gmap-marker coords="marker.coords" options="marker.options" events="marker.events" idkey="marker.id">
      </ui-gmap-marker>

    </ui-gmap-google-map>

    <hr>

    <button class="btn btn-success btn-lg" ng-click="getCurrentLocation()"> Get my location</button>
    <p class="pull-right">My current location is: {{coords.lat}}, {{coords.long}}</p>

    <hr>

    <div class="container">
      <accordion>
        <accordion-group ng-repeat="brewery in breweries | orderBy: 'distance'" is-open="status.isItemOpen[$index]">
          <accordion-heading>
            {{brewery.brewery.name}} <span class="pull-right badge">Distance: {{brewery.distance}} miles</span>
          </accordion-heading>
            <div class="row">
              <div class="col-md-3">
                <div ng-if="brewery.brewery.images.medium">
                  <img src="{{brewery.brewery.images.medium}}">
                </div>
                <p class="right">Established: {{brewery.brewery.established}}<br>
                Website: <a href="{{brewery.brewery.website}}" target="_blank">{{brewery.brewery.website}}</a></p>
                <div ng-if="brewery.brewery.isOrganic == 'Y'">
                  <p class="right">Certified Organic</p>
                </div>
                <p><a class="btn btn-info btn-sm pull-right" href="#!/beers/{{brewery.brewery.id}}" role="button">List their beers &raquo;</a></p>
              </div>
              <div class="col-md-9">
                <p class="content">{{brewery.brewery.description}}</p>
                <p><a class="btn btn-success pull-right" href="#/ratings" role="button">Give your ratings &raquo;</a></p>
              </div>
            </div>
        </accordion-group>
      </accordion>
    </div>
  </div>
</section>
