<section data-ng-controller="NearbyController">
  <div class="container-fluid">
    <ui-gmap-google-map center="map.center" zoom="map.zoom" draggable="true" options="options" bounds="map.bounds">
      <ui-gmap-marker coords="marker.coords" options="marker.options" idkey="marker.id" click="'onClick'">
      <ui-gmap-markers models="allMarkers" coords="'self'" options="'options'" icon="'icon'" click="'onClick'">
        <ui-gmap-windows show="show">
          <div ng-non-bindable>{{title}}</div>
        </ui-gmap-windows>
      </ui-gmap-markers>

      <!-- marker to show user cuurent coordinate -->
      <ui-gmap-marker coords="marker.coords" options="marker.options" events="marker.events" idkey="marker.id">
      </ui-gmap-marker>

    </ui-gmap-google-map>

<!--     <button class="btn btn-success btn-lg" ng-click="getCurrentLocation()"> Get my location</button>
    <p class="pull-right">My current location is: {{coords.lat}}, {{coords.long}}</p>
 -->

    <div class="container-fluid">
      <accordion>
        <accordion-group ng-repeat="brewery in breweries | orderBy: 'distance'" is-open="status.isItemOpen[$index]">
          <accordion-heading>
            {{brewery.brewery.name}} <span class="pull-right badge">Distance: {{brewery.distance}} miles</span>
          </accordion-heading>
          <div class="row">
            <div class="col-sm-4">
              <div ng-if="brewery.brewery.images.medium">
                <img class="brewery-img img-responsive center-block" src="{{brewery.brewery.images.medium}}">
              </div>
              <div ng-if="brewery.brewery.established">
                <p class="center"><strong>Established:</strong> {{brewery.brewery.established}}</p>
              </div>
              <div ng-if="brewery.brewery.website">
                <p class="center"><a href="{{brewery.brewery.website}}" target="_blank">{{brewery.brewery.website}}</a></p>
              </div>
              <div ng-if="brewery.brewery.isOrganic == 'Y'">
                <p class="center">Certified Organic</p>
              </div>
              <p class="beer-btn"><a class="btn btn-info btn-sm" href="#!/beers/{{brewery.brewery.id}}" role="button">List their beers &raquo;</a></p>

              <form class="form-horizontal text-center" data-ng-submit="create($index)" novalidate>
                <fieldset>
                  <div class="form-group">
                    <label class="control-label" for="rating">How many stars would you give?</label>
                    <div class="controls">
                      <rating class="stars" ng-model="rate" max="max" readonly="isReadonly" on-hover="hoveringOver(value)" on-leave="overStar = null"></rating>
                    </div>
                  </div>
                  <div class="form-group">
                    <input type="submit" class="btn btn-primary">
                  </div>
                  <div data-ng-show="error" class="text-danger">
                    <strong data-ng-bind="error"></strong>
                  </div>
                </fieldset>
              </form>

            </div>
            <div class="col-sm-8">
              <p class="content">{{brewery.brewery.description}}</p>
            </div>
          </div><!-- /.row -->

        </accordion-group>
      </accordion>
    </div>
  </div>
</section>
