<section data-ng-controller="NearbyController">
  <div class="left-half-container">
    <ui-gmap-google-map center="map.center" zoom="map.zoom" draggable="true" options="options" bounds="map.bounds">
      <ui-gmap-marker coords="marker.coords" options="marker.options" idkey="marker.id" click="'onClick'">
      <ui-gmap-markers models="allMarkers" coords="'self'" options="'options'" icon="'icon'" click="'onClick'">
        <ui-gmap-windows show="show">
          <div ng-non-bindable>{{title}}</div>
        </ui-gmap-windows>
      </ui-gmap-markers>

      <!-- marker to show user cuurent coordinate -->
      <ui-gmap-marker coords="marker.coords" options="marker.options" events="marker.events" idkey="marker.id">
      </ui-gmap-marker>

    </ui-gmap-google-map>
  </div>
  <div class="right-half-container">
    <div class="container-fluid">

      <div class="col-md-4">
        <button class="btn btn-primary btn-lg" ng-click="getCurrentLocation()"> Get my location</button>
      </div>

      <div class="col-md-4">

        <div class="btn-group" dropdown is-open="status.isopen">
          <button type="button" class="btn btn-primary btn-lg dropdown-toggle" dropdown-toggle ng-disabled="disabled">
            Choose your State <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" role="menu">
            <li ng-repeat="choice in items">
              <a href>{{choice}}</a>
            </li>
          </ul>
        </div>
      </div>

      <div class="col-md-4">
      </div>

      <div class="clearfix">
      <hr ng-init="getBreweries()">
      <div class="panel panel-default" ng-repeat="brewery in breweries | orderBy: 'distance'">
          <div class="panel-heading">
            {{brewery.brewery.name}} <span class="pull-right badge">{{brewery.distance}} miles away</span>
          </div>
          <div class="panel-body">
            <div class="row">
              <div class="col-md-8">
                 <p class="content">{{brewery.brewery.description}}</p>
                 <p ng-if="!brewery.brewery.description" class="content">No description</p>
              </div>
              <div class="col-md-4">
                <div ng-if="brewery.brewery.images.medium">
                  <img class="brewery-img img-responsive center-block" src="{{brewery.brewery.images.medium}}">
                </div>
                <div ng-if="brewery.brewery.established">
                  <p class="center"><strong>Established:</strong> {{brewery.brewery.established}}</p>
                </div>
                <div ng-if="brewery.brewery.website">
                  <p class="center"><a href="{{brewery.brewery.website}}" target="_blank">{{brewery.brewery.website}}</a></p>
                </div>
                <div ng-if="brewery.brewery.isOrganic == 'Y'">
                  <p class="center">Certified Organic</p>
                </div>
                <p class="beer-btn"><a class="btn btn-info btn-lg" href="#!/beers/{{brewery.brewery.id}}" role="button">List their beers &raquo;</a></p>
              </div>
            </div><!-- /.row -->
          </div>
        </div>
      </div>
    </div>
</section>
